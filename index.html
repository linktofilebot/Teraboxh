<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeraBox Premium Player</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; font-family: sans-serif; overflow: hidden; }
        .container { position: relative; width: 100%; height: 100%; display: flex; flex-direction: column; }
        
        /* উপরের ইনপুট বক্স */
        .input-box { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); z-index: 100; display: flex; gap: 5px; background: rgba(0,0,0,0.6); padding: 10px; border-radius: 10px; width: 90%; max-width: 500px; }
        input { flex: 1; padding: 10px; border-radius: 5px; border: none; outline: none; }
        button { padding: 10px 15px; background: #0084ff; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }

        /* প্লেয়ার এরিয়া */
        #player-container { flex: 1; width: 100%; height: 100%; }
        iframe { width: 100%; height: 100%; border: none; }

        .error-msg { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; display: none; color: #aaa; width: 80%; }
        .desktop-btn { margin-top: 15px; padding: 10px; background: #ff9800; color: white; border-radius: 5px; text-decoration: none; display: inline-block; }
    </style>
</head>
<body>

<div class="container">
    <div class="input-box">
        <input type="text" id="videoUrl" value="https://1024terabox.com/s/1v3X9omm6NBpGiqPQlkwk5w" placeholder="TeraBox লিঙ্ক দিন">
        <button onclick="playVideo()">প্লে করুন</button>
    </div>

    <div id="player-container">
        <iframe id="teraIframe" src="" allowfullscreen="true" allow="autoplay; fullscreen" scrolling="no"></iframe>
    </div>

    <div id="errorBox" class="error-msg">
        <p>ভিডিওটি এখানে সরাসরি লোড হচ্ছে না?</p>
        <p>মোবাইল ইউজাররা ব্রাউজারের উপরে (৩-ডট) ক্লিক করে <b>"Desktop Site"</b> মোড অন করুন।</p>
        <a href="javascript:void(0)" onclick="playVideo()" class="desktop-btn">আবার চেষ্টা করুন</a>
    </div>
</div>

<script>
    function playVideo() {
        const urlInput = document.getElementById('videoUrl').value.trim();
        const iframe = document.getElementById('teraIframe');
        const errorBox = document.getElementById('errorBox');
        
        // আপনার সঠিক Associate Key
        const myKey = "oST1LLtu6l9-40fczlLOssK46o112lTn_Xho4cP9nzo=";
        
        let surl = "";

        // SURL আইডি সঠিকভাবে বের করা (শুরুর '1' বাদ দিয়ে)
        if (urlInput.includes("/s/1")) {
            surl = urlInput.split("/s/1")[1].split("?")[0];
        } else if (urlInput.includes("surl=")) {
            surl = urlInput.split("surl=")[1].split("&")[0];
        } else if (urlInput.includes("/s/")) {
            surl = urlInput.split("/s/")[1].split("?")[0];
        }

        if (surl) {
            // ১. অফিশিয়াল এমবেড লিঙ্ক যা সরাসরি আপনার সাইটে প্লেয়ার লোড করবে
            const finalUrl = `https://www.teraboxapp.com/sharing/embed?surl=${surl}&sl_key=${myKey}&autoplay=true&resolution=1080`;
            
            iframe.src = finalUrl;
            errorBox.style.display = "block"; // ইনস্ট্রাকশন দেখাবে ভিডিওর পেছনে
            
            console.log("Playing SURL: " + surl + " with Key: " + myKey);
        } else {
            alert("সঠিক লিঙ্ক দিন!");
        }
    }

    // পেজ লোড হলে অটো প্লে
    window.onload = playVideo;
</script>

</body>
</html>
